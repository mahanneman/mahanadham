<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0">
    <title>مهندس ماهان ادهم قزوینی | تخصص در مکانیک سیالات، تحلیل CFD و طراحی پرینتر سه‌بعدی</title>
    
    <!-- Meta Tags for SEO -->
    <meta name="description" content="رزومه آنلاین ماهان ادهم قزوینی - مهندس مکانیک فارغ‌التحصیل دانشگاه آزاد اسلامی تهران مرکز، متخصص در تحلیل CFD، طراحی سیستم‌های مکانیکی و قطعات پرینتر سه‌بعدی با ۱ سال تجربه کاری و ۵ پروژه موفق">
    <meta name="keywords" content="مهندس مکانیک, تحلیل CFD, طراحی پرینتر سه بعدی, انسیس فلوئنت, کتیا, سالیدورکس, مهندسی سیالات, ماهان ادهم قزوینی">
    <meta name="author" content="ماهان ادهم قزوینی">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="مهندس ماهان ادهم قزوینی | تخصص در مکانیک سیالات و تحلیل CFD">
    <meta property="og:description" content="رزومه آنلاین مهندس مکانیک متخصص در تحلیل CFD و طراحی قطعات پرینتر سه‌بعدی">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="fa_IR">
    <meta property="og:image" content="https://images.unsplash.com/photo-1582750433449-648ed127bb54?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="مهندس ماهان ادهم قزوینی">
    <meta name="twitter:description" content="رزومه آنلاین مهندس مکانیک متخصص در تحلیل CFD و طراحی قطعات پرینتر سه‌بعدی">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#2c3e50">
    <meta name="msapplication-TileColor" content="#2c3e50">
    
    <!-- CSS Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" 
          integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" 
          crossorigin="anonymous" referrerpolicy="no-referrer">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800;900&display=swap" 
          rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" 
          integrity="sha512-c42qTSw/wPZ3/5LBzD+Bw5f7bSF2oxou6wEb+I/lqeaKV5FDIfMvvRp772y4jcJLKuGUOpbJMdg/BTl50fJYAw==" 
          crossorigin="anonymous" referrerpolicy="no-referrer">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="style.css" as="style">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800;900&display=swap" 
          as="style" crossorigin="anonymous">
    
    <!-- Preconnect to important domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <!-- Add to home screen for iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="مهندس ماهان ادهم">
    
    <!-- Add to home screen for Android -->
    <meta name="mobile-web-app-capable" content="yes">
</head>
<body>
    <!-- Loading Screen - Improved -->
    <div class="loading-screen" id="loadingScreen">
        <div class="spinner-container">
            <div class="spinner">
                <div class="double-bounce1"></div>
                <div class="double-bounce2"></div>
            </div>
            <div class="loading-text">
                <p class="loading-message">در حال بارگذاری رزومه...</p>
                <div class="loading-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <span class="progress-text" id="progressText">0%</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Header با منوی کشویی -->
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <!-- لوگو -->
                <div class="logo">
                    <a href="#home" class="logo-link">
                        <div class="logo-icon">
                            <i class="fas fa-cogs"></i>
                        </div>
                        <div class="logo-text">
                            <h1 class="logo-name">ماهان ادهم قزوینی</h1>
                            <p class="logo-title">مهندس مکانیک گرایش سیالات</p>
                        </div>
                    </a>
                </div>
                
                <!-- دکمه‌های هدر -->
                <div class="header-actions">
                    <a href="resume.pdf" download class="btn btn-outline btn-resume">
                        <i class="fas fa-file-download"></i>
                        <span class="btn-text">رزومه PDF</span>
                    </a>
                    
                    <!-- دکمه تغییر تم -->
                    <button id="themeToggle" class="theme-toggle" aria-label="تغییر تم">
                        <i class="fas fa-moon theme-icon"></i>
                        <i class="fas fa-sun theme-icon"></i>
                    </button>
                    
                    <!-- دکمه منوی کشویی -->
                    <button class="menu-toggle" id="menuToggle" aria-label="منو" aria-expanded="false">
                        <i class="fas fa-bars"></i>
                        <span class="menu-text">منو</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- منوی کشویی -->
    <div class="slide-menu-container" id="slideMenu">
        <!-- دکمه بستن -->
        <button class="slide-menu-close" id="slideMenuClose">
            <i class="fas fa-times"></i>
        </button>
        
        <!-- پروفایل در منو -->
        <div class="slide-menu-profile">
            <img src="mahanphoto.png" alt="ماهان ادهم قزوینی" class="slide-menu-profile-img">
            <h3>ماهان ادهم قزوینی</h3>
            <p>متخصص تحلیل CFD و طراحی</p>
        </div>
        
        <!-- لیست منو -->
        <ul class="slide-menu-list">
            <li class="slide-menu-item">
                <a href="#home" class="slide-menu-link active" data-menu="home">
                    <i class="fas fa-home"></i>
                    <span>خانه</span>
                </a>
            </li>
            <li class="slide-menu-item">
                <a href="#about" class="slide-menu-link" data-menu="about">
                    <i class="fas fa-user"></i>
                    <span>درباره من</span>
                </a>
            </li>
            <li class="slide-menu-item">
                <a href="#skills" class="slide-menu-link" data-menu="skills">
                    <i class="fas fa-cogs"></i>
                    <span>مهارت‌ها</span>
                </a>
            </li>
            <li class="slide-menu-item">
                <a href="#education" class="slide-menu-link" data-menu="education">
                    <i class="fas fa-graduation-cap"></i>
                    <span>تحصیلات</span>
                </a>
            </li>
            <li class="slide-menu-item">
                <a href="#projects" class="slide-menu-link" data-menu="projects">
                    <i class="fas fa-project-diagram"></i>
                    <span>پروژه‌ها</span>
                </a>
            </li>
            <li class="slide-menu-item">
                <a href="archive.html" class="slide-menu-link" data-menu="archive">
                    <i class="fas fa-archive"></i>
                    <span>آرشیو</span>
                </a>
            </li>
            <li class="slide-menu-item">
                <a href="product/products.html" class="slide-menu-link" data-menu="products">
                    <i class="fas fa-cube"></i>
                    <span>محصولات</span>
                </a>
            </li>
            <li class="slide-menu-item">
                <a href="#contact" class="slide-menu-link" data-menu="contact">
                    <i class="fas fa-envelope"></i>
                    <span>تماس</span>
                </a>
            </li>
        </ul>
        
        <!-- اطلاعات تماس در منو -->
        <div class="slide-menu-contact">
            <div class="contact-info">
                <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <a href="tel:+989902279702">۰۹۹۰۲۲۷۹۷۰۲</a>
                </div>
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <a href="mailto:mahan.neman2020@gmail.com">mahan.neman2020@gmail.com</a>
                </div>
            </div>
            
            <!-- شبکه‌های اجتماعی -->
            <div class="social-links-menu">
                <a href="https://t.me/mahanenman" target="_blank" class="social-icon">
                    <i class="fab fa-telegram"></i>
                </a>
                <a href="https://www.instagram.com/mahantheloner" target="_blank" class="social-icon">
                    <i class="fab fa-instagram"></i>
                </a>
            </div>
        </div>
    </div>

    <!-- آواردرای برای منو -->
    <div class="menu-overlay" id="menuOverlay"></div>

    <!-- محتوای اصلی (همان کد اول) -->
    <main>
        <!-- Hero Section - Improved -->
        <section id="home" class="hero-section">
            <!-- Background Elements -->
            <div class="hero-bg">
                <div class="bg-gradient"></div>
                <div class="bg-pattern"></div>
            </div>
            
            <div class="container">
                <div class="hero-content">
                    <!-- Hero Image - Improved -->
                    <div class="hero-image">
                        <div class="profile-image-container">
                            <div class="image-wrapper">
                                <img src="mahanphoto.png" 
                                     alt="مهندس ماهان ادهم قزوینی" 
                                     class="profile-img"
                                     loading="lazy">
                                <div class="image-shine"></div>
                            </div>
                            <div class="profile-badge animate__animated animate__pulse animate__infinite animate__slower">
                                <i class="fas fa-award"></i>
                                <span>مهندس مکانیک</span>
                            </div>
                            <div class="profile-status">
                                <div class="status-dot"></div>
                                <span>در دسترس برای پروژه‌ها</span>
                            </div>
                        </div>
                        
                        <!-- Trust Badges - Improved -->
                        <div class="trust-badges">
                            <div class="badge">
                                <i class="fas fa-check-circle"></i>
                                <span>دارای گواهی‌نامه</span>
                            </div>
                            <div class="badge">
                                <i class="fas fa-medal"></i>
                                <span>۵ پروژه موفق</span>
                            </div>
                            <div class="badge">
                                <i class="fas fa-star"></i>
                                <span>رضایت مشتری</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Hero Text - Improved -->
                    <div class="hero-text">
                        <div class="hero-intro">
                            <div class="intro-badge">
                                <i class="fas fa-hand-wave"></i>
                                <span>خوش آمدید به رزومه آنلاین</span>
                            </div>
                            
                            <h1 class="hero-title">
                                <span class="title-line">مهندس</span>
                                <span class="text-gradient title-name">ماهان ادهم قزوینی</span>
                            </h1>
                            
                            <div class="typing-container">
                                <div class="typing-wrapper">
                                    <p class="typing-text">
                                        <span class="typed-text"></span>
                                        <span class="cursor">&nbsp;</span>
                                    </p>
                                    <div class="typing-line"></div>
                                </div>
                            </div>
                            
                            <p class="hero-description">
                                مهندس مکانیک با تخصص در تحلیل سیالات محاسباتی (CFD)، طراحی سیستم‌های مکانیکی و توسعه قطعات پرینتر سه‌بعدی. متعهد به ارائه راه‌حل‌های نوآورانه و کاربردی در حوزه مهندسی.
                            </p>
                            
                            <!-- Expertise Tags -->
                            <div class="expertise-tags">
                                <span class="tag">تحلیل CFD</span>
                                <span class="tag">طراحی مکانیکی</span>
                                <span class="tag">پرینتر سه‌بعدی</span>
                                <span class="tag">شبیه‌سازی</span>
                            </div>
                        </div>
                        
                        <!-- Quick Stats - Improved -->
                        <div class="hero-stats">
                            <div class="stats-grid">
                                <div class="stat-item" data-aos="fade-up" data-aos-delay="100">
                                    <div class="stat-icon">
                                        <i class="fas fa-briefcase"></i>
                                    </div>
                                    <div class="stat-content">
                                        <span class="stat-number" data-count="1" data-speed="200">0</span>
                                        <span class="stat-symbol">+</span>
                                        <span class="stat-label">سال تجربه</span>
                                    </div>
                                </div>
                                <div class="stat-item" data-aos="fade-up" data-aos-delay="200">
                                    <div class="stat-icon">
                                        <i class="fas fa-project-diagram"></i>
                                    </div>
                                    <div class="stat-content">
                                        <span class="stat-number" data-count="5" data-speed="150">0</span>
                                        <span class="stat-symbol">+</span>
                                        <span class="stat-label">پروژه موفق</span>
                                    </div>
                                </div>
                                <div class="stat-item" data-aos="fade-up" data-aos-delay="300">
                                    <div class="stat-icon">
                                        <i class="fas fa-tools"></i>
                                    </div>
                                    <div class="stat-content">
                                        <span class="stat-number" data-count="13" data-speed="100">0</span>
                                        <span class="stat-label">نرم‌افزار مسلط</span>
                                    </div>
                                </div>
                                <div class="stat-item" data-aos="fade-up" data-aos-delay="400">
                                    <div class="stat-icon">
                                        <i class="fas fa-file-alt"></i>
                                    </div>
                                    <div class="stat-content">
                                        <span class="stat-number" data-count="2" data-speed="250">0</span>
                                        <span class="stat-symbol">+</span>
                                        <span class="stat-label">مقاله و ترجمه</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Call to Action - Improved -->
                        <div class="hero-actions">
                            <div class="actions-grid">
                                <a href="#contact" class="btn btn-primary btn-lg btn-action" data-aos="zoom-in" data-aos-delay="100">
                                    <i class="fas fa-paper-plane"></i>
                                    <span>درخواست همکاری</span>
                                </a>
                                <a href="resume.pdf" download class="btn btn-secondary btn-lg btn-action" data-aos="zoom-in" data-aos-delay="200">
                                    <i class="fas fa-download"></i>
                                    <span>دانلود رزومه</span>
                                </a>
                                <a href="#projects" class="btn btn-outline btn-lg btn-action" data-aos="zoom-in" data-aos-delay="300">
                                    <i class="fas fa-eye"></i>
                                    <span>مشاهده پروژه‌ها</span>
                                </a>
                            </div>
                        </div>
                        
                        <!-- Social Proof - Improved -->
                        <div class="social-proof">
                            <div class="proof-label">
                                <i class="fas fa-building"></i>
                                <span>همکاری با</span>
                            </div>
                            <div class="clients-logos">
                                <div class="logo-item" data-tooltip="دانشگاه آزاد اسلامی تهران مرکز">
                                    <i class="fas fa-university"></i>
                                    <span>دانشگاه آزاد</span>
                                </div>
                                <div class="logo-item" data-tooltip="مجتمع فنی تهران">
                                    <i class="fas fa-certificate"></i>
                                    <span>مجتمع فنی</span>
                                </div>
                                <div class="logo-item" data-tooltip="پروژه‌های صنعتی و تحقیقاتی">
                                    <i class="fas fa-industry"></i>
                                    <span>پروژه‌های صنعتی</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Scroll Indicator - Improved -->
            <div class="scroll-indicator">
                <a href="#about" class="scroll-down" aria-label="اسکرول به پایین">
                    <div class="mouse-wrapper">
                        <div class="mouse">
                            <div class="wheel"></div>
                        </div>
                        <div class="arrows">
                            <i class="fas fa-chevron-down arrow1"></i>
                            <i class="fas fa-chevron-down arrow2"></i>
                            <i class="fas fa-chevron-down arrow3"></i>
                        </div>
                    </div>
                    <span class="scroll-text">برای ادامه اسکرول کنید</span>
                </a>
            </div>
        </section>

        <!-- بقیه سکشن‌ها از کد اول -->
        <!-- About Section -->
        <section id="about" class="about-section">
            <!-- محتوای about از کد اول -->
        </section>

        <!-- Skills Section -->
        <section id="skills" class="skills-section">
            <!-- محتوای skills از کد اول -->
        </section>

        <!-- Education Section -->
        <section id="education" class="education-section">
            <!-- محتوای education از کد اول -->
        </section>

        <!-- Projects Section -->
        <section id="projects" class="projects-section">
            <!-- محتوای projects از کد اول -->
        </section>

        <!-- Contact Section -->
        <section id="contact" class="contact-section">
            <!-- محتوای contact از کد اول -->
        </section>
    </main>

    <!-- Footer - همان کد اول -->
    <footer class="main-footer">
        <!-- محتوای footer از کد اول -->
    </footer>

    <!-- Floating Action Buttons -->
    <div class="fab-container">
        <button class="fab fab-main" id="fabMain" aria-label="منوی عملیات سریع">
            <i class="fas fa-bolt"></i>
            <i class="fas fa-times"></i>
        </button>
        <div class="fab-options">
            <a href="#contact" class="fab-option" title="تماس" aria-label="تماس با من">
                <div class="option-icon">
                    <i class="fas fa-phone"></i>
                </div>
                <span class="option-label">تماس</span>
            </a>
            <a href="resume.pdf" download class="fab-option" title="دانلود رزومه" aria-label="دانلود رزومه">
                <div class="option-icon">
                    <i class="fas fa-download"></i>
                </div>
                <span class="option-label">رزومه</span>
            </a>
            <button class="fab-option" id="themeFab" title="تغییر تم" aria-label="تغییر تم">
                <div class="option-icon">
                    <i class="fas fa-palette"></i>
                </div>
                <span class="option-label">تم</span>
            </button>
            <a href="#top" class="fab-option" title="بازگشت به بالا" aria-label="بازگشت به بالا">
                <div class="option-icon">
                    <i class="fas fa-arrow-up"></i>
                </div>
                <span class="option-label">بالا</span>
            </a>
            <a href="https://t.me/mahanenman" target="_blank" class="fab-option" title="تلگرام" aria-label="ارتباط از طریق تلگرام">
                <div class="option-icon">
                    <i class="fab fa-telegram"></i>
                </div>
                <span class="option-label">تلگرام</span>
            </a>
        </div>
    </div>

    <!-- Back to Top Button -->
    <button id="backToTop" class="back-to-top" aria-label="بازگشت به بالا">
        <i class="fas fa-chevron-up"></i>
    </button>

    <!-- JavaScript Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.12/typed.min.js" 
            integrity="sha512-3J8teBiI3tt2o1d0mEhRXpWON70wG4QdC9VQF8GvLfL3f4Q8b8Q8zQ8zQ8zQ8zQ8zQ8zQ8zQ8zQ8zQ8zQ8zQ8A==" 
            crossorigin="anonymous" 
            referrerpolicy="no-referrer"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Main JavaScript -->
    <script src="script.js"></script>
    
    <!-- Inline Script for Initialization -->
    <script>
        // ==========================================================================
        // مدیریت منوی کشویی (از کد دوم)
        // ==========================================================================
        document.addEventListener('DOMContentLoaded', function() {
            // عناصر منو
            const menuToggle = document.getElementById('menuToggle');
            const slideMenu = document.getElementById('slideMenu');
            const slideMenuClose = document.getElementById('slideMenuClose');
            const menuOverlay = document.getElementById('menuOverlay');
            const slideMenuLinks = document.querySelectorAll('.slide-menu-link');
            
            // باز کردن منو
            if (menuToggle) {
                menuToggle.addEventListener('click', function() {
                    slideMenu.classList.add('active');
                    menuOverlay.classList.add('active');
                    document.body.classList.add('no-scroll');
                    this.setAttribute('aria-expanded', 'true');
                });
            }
            
            // بستن منو
            function closeMenu() {
                slideMenu.classList.remove('active');
                menuOverlay.classList.remove('active');
                document.body.classList.remove('no-scroll');
                if (menuToggle) {
                    menuToggle.setAttribute('aria-expanded', 'false');
                }
            }
            
            // بستن با دکمه
            if (slideMenuClose) {
                slideMenuClose.addEventListener('click', closeMenu);
            }
            
            // بستن با کلیک روی آواردرای
            if (menuOverlay) {
                menuOverlay.addEventListener('click', closeMenu);
            }
            
            // بستن با کلید Escape
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && slideMenu.classList.contains('active')) {
                    closeMenu();
                }
            });
            
            // مدیریت لینک‌های منو و اسکرول نرم
            slideMenuLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    if (targetId === '#' || !targetId.startsWith('#')) return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        // حذف کلاس active از همه لینک‌ها
                        slideMenuLinks.forEach(l => l.classList.remove('active'));
                        // اضافه کردن به لینک کلیک شده
                        this.classList.add('active');
                        
                        // بستن منو در موبایل
                        if (window.innerWidth <= 991) {
                            setTimeout(closeMenu, 300);
                        }
                        
                        // اسکرول نرم به بخش مورد نظر
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                });
            });
            
            // تغییر آکتیو بودن منو بر اساس اسکرول
            window.addEventListener('scroll', function() {
                const sections = document.querySelectorAll('section[id]');
                const scrollPosition = window.scrollY + 100;
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.clientHeight;
                    const sectionId = section.getAttribute('id');
                    
                    if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                        slideMenuLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href') === `#${sectionId}`) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            });

            // ==========================================================================
            // بقیه JavaScript از کد اول
            // ==========================================================================
            
            // Initialize AOS (Animate On Scroll)
            if (typeof AOS !== 'undefined') {
                AOS.init({
                    duration: 800,
                    once: true,
                    offset: 100,
                    easing: 'ease-in-out',
                    delay: 100
                });
            }

            // Initialize Typing Animation
            if (document.querySelector('.typed-text') && typeof Typed !== 'undefined') {
                new Typed('.typed-text', {
                    strings: [
                        'مهندس مکانیک گرایش سیالات',
                        'تحلیل‌گر CFD',
                        'طراح قطعات پرینتر سه بعدی',
                        'متخصص شبیه‌سازی حرارتی',
                        'مشاور مهندسی مکانیک'
                    ],
                    typeSpeed: 50,
                    backSpeed: 30,
                    backDelay: 2000,
                    loop: true,
                    showCursor: true,
                    cursorChar: '|',
                    contentType: 'html'
                });
            }

            // Enhanced Loading Screen
            const loadingScreen = document.getElementById('loadingScreen');
            if (loadingScreen) {
                let progress = 0;
                const progressBar = document.getElementById('progressFill');
                const progressText = document.getElementById('progressText');
                
                const interval = setInterval(() => {
                    progress += Math.random() * 10;
                    if (progress > 100) progress = 100;
                    
                    if (progressBar) progressBar.style.width = progress + '%';
                    if (progressText) progressText.textContent = Math.round(progress) + '%';
                    
                    if (progress >= 100) {
                        clearInterval(interval);
                        setTimeout(() => {
                            loadingScreen.style.opacity = '0';
                            setTimeout(() => {
                                loadingScreen.style.display = 'none';
                            }, 500);
                        }, 500);
                    }
                }, 50);
            }

            // Theme Toggle
            const themeToggle = document.getElementById('themeToggle');
            const themeFab = document.getElementById('themeFab');
            const currentTheme = localStorage.getItem('theme') || 'dark';

            document.documentElement.setAttribute('data-theme', currentTheme);

            function toggleTheme() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                
                // Add transition class
                document.body.classList.add('theme-transition');
                setTimeout(() => {
                    document.body.classList.remove('theme-transition');
                }, 500);
                
                // Dispatch custom event
                document.dispatchEvent(new CustomEvent('themeChanged', { detail: { theme: newTheme } }));
            }

            if (themeToggle) themeToggle.addEventListener('click', toggleTheme);
            if (themeFab) themeFab.addEventListener('click', toggleTheme);

            // Enhanced Form Submission
            const contactForm = document.getElementById('contactForm');
            const formSuccess = document.getElementById('formSuccess');
            const closeSuccess = document.getElementById('closeSuccess');

            if (contactForm) {
                contactForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    const submitBtn = this.querySelector('.btn-submit');
                    const formData = new FormData(this);
                    
                    // Show loading state
                    submitBtn.classList.add('loading');
                    
                    try {
                        // Simulate API call
                        await new Promise(resolve => setTimeout(resolve, 1500));
                        
                        // Show success message
                        this.style.display = 'none';
                        if (formSuccess) {
                            formSuccess.style.display = 'flex';
                        }
                        
                        // Reset form after delay
                        setTimeout(() => {
                            this.reset();
                            this.style.display = 'block';
                            if (formSuccess) {
                                formSuccess.style.display = 'none';
                            }
                            submitBtn.classList.remove('loading');
                        }, 5000);
                        
                    } catch (error) {
                        console.error('Form submission error:', error);
                        submitBtn.classList.remove('loading');
                        alert('خطا در ارسال پیام. لطفاً مجدداً تلاش کنید.');
                    }
                });

                // Character count for message textarea
                const messageTextarea = contactForm.querySelector('#message');
                const charCount = contactForm.querySelector('#charCount');
                
                if (messageTextarea && charCount) {
                    messageTextarea.addEventListener('input', function() {
                        charCount.textContent = this.value.length;
                        
                        if (this.value.length > 500) {
                            this.value = this.value.substring(0, 500);
                            charCount.textContent = 500;
                        }
                    });
                }
            }

            if (closeSuccess) {
                closeSuccess.addEventListener('click', function() {
                    formSuccess.style.display = 'none';
                    contactForm.style.display = 'block';
                });
            }

            // Enhanced Back to Top
            const backToTop = document.getElementById('backToTop');
            if (backToTop) {
                window.addEventListener('scroll', function() {
                    if (window.pageYOffset > 300) {
                        backToTop.classList.add('show');
                    } else {
                        backToTop.classList.remove('show');
                    }
                });

                backToTop.addEventListener('click', function() {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                });
            }

            // Enhanced FAB
            const fabMain = document.getElementById('fabMain');
            if (fabMain) {
                fabMain.addEventListener('click', function() {
                    this.parentElement.classList.toggle('active');
                });
            }

            // Enhanced Skills Tabs
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabPanes = document.querySelectorAll('.tab-pane');

            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Remove active class from all buttons and panes
                    tabBtns.forEach(b => {
                        b.classList.remove('active');
                        b.setAttribute('aria-selected', 'false');
                    });
                    tabPanes.forEach(p => p.classList.remove('active'));
                    
                    // Add active class to current button and pane
                    this.classList.add('active');
                    this.setAttribute('aria-selected', 'true');
                    document.getElementById(tabId).classList.add('active');
                });
            });

            // Enhanced Projects Filter
            const filterBtns = document.querySelectorAll('.filter-btn');
            const projectCards = document.querySelectorAll('.project-card');

            filterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const filter = this.getAttribute('data-filter');
                    
                    // Update active filter button
                    filterBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Filter projects
                    projectCards.forEach(card => {
                        if (filter === 'all' || card.getAttribute('data-category').includes(filter)) {
                            card.style.display = 'block';
                            setTimeout(() => {
                                card.style.opacity = '1';
                                card.style.transform = 'translateY(0)';
                            }, 10);
                        } else {
                            card.style.opacity = '0';
                            card.style.transform = 'translateY(20px)';
                            setTimeout(() => {
                                card.style.display = 'none';
                            }, 300);
                        }
                    });
                });
            });

            // Smooth Scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    if (this.classList.contains('slide-menu-link')) return;
                    
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                });
            });

            // Window load event
            window.addEventListener('load', function() {
                // Remove loading screen if still visible
                const loadingScreen = document.getElementById('loadingScreen');
                if (loadingScreen && loadingScreen.style.display !== 'none') {
                    loadingScreen.style.opacity = '0';
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                    }, 500);
                }
                
                // Update year in footer
                const currentYear = new Date().getFullYear();
                const persianYear = currentYear - 621;
                const yearElement = document.querySelector('.copyright p');
                if (yearElement) {
                    yearElement.innerHTML = yearElement.innerHTML.replace('۱۴۰۳', persianYear);
                }
            });
        });
    </script>
</body>
</html>
